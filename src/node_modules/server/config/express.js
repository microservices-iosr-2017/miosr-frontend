/**
 * Express configuration
 */

'use strict';

import express from 'express';
import morgan from 'morgan';
import lusca from 'lusca';
import config from './environment';


export default function(app) {
  const env = app.get('env');

  app.use('/', express.static(config.clientRoot));

  /**
   * Lusca - express server security
   */
  if(env !== 'test') {
    app.use(lusca({
      csrf: false,
      xframe: 'SAMEORIGIN',
      hsts: {
        maxAge: 31536000, // 1 year, in seconds
        includeSubDomains: true,
        preload: true,
      },
      xssProtection: true,
    }));
  }

  app.use(morgan('dev'));
}
