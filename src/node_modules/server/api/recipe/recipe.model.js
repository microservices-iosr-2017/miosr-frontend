import mongoose from 'mongoose';
import {IngredientSchema} from './ingredient/ingredient.model';

const Schema = mongoose.Schema;

const RecipeSchema = new Schema({
  title: String,
  subtitle: String,
  description: String,
  private: {
    type: Boolean,
    default: true,
  },
  created_at: {
    type: Date,
    default: Date.now,
  },
  ingredients: {
    type: [IngredientSchema],
    default: [],
  },
  instructions: String,
  tags: {
    type: [String],
    index: true,
  },
  author: String,
  image: {
    type: String,
  },
});

RecipeSchema.index({title: 'text', subtitle: 'text', description: 'text', instructions: 'text'},
  {name: 'textIndex', weights: {title: 10, subtitle: 3, description: 2, instructions: 1}});

export default mongoose.model('Recipe', RecipeSchema);
