/**
 * Main application routes
 */

'use strict';

import path from 'path';
import config from 'server/config/environment';

function pageNotFound(req, res) {
  res.status(404);
  res.send("File not found");
}

export default function(app) {
  // API routes
  app.use('/api/example', require('./api/example').default);
  app.route('/api/*').get(pageNotFound);

  // All other routes should redirect to the index.html (or return 404 if clientRoot
  // is not known
  if(config.clientRoot != null) {
    app.route('/*')
      .get((req, res) => {
        res.sendFile(path.resolve(`${config.clientRoot}/index.html`));
      });
  } else {
    app.route('/!*').get(pageNotFound);
  }
}
