import React, {PropTypes} from 'react';
import RecipesStore from 'stores/RecipesStore';
import PlannerActions from 'actions/PlannerActions';
import Card from 'components/shared/card/Card';
import StoreStateSubscriber from 'mixins/StoreStateSubscriber';

import RecipeSearch from './RecipeSearch';
import AddRecipeModal from './AddRecipeModal';

const recipeSubscriber = StoreStateSubscriber(RecipesStore);

class PlannerSidebar extends recipeSubscriber(React.Component) {
  render() {
    return (
      <div style={{overflow: 'auto'}}>
        <RecipeSearch />
        {
          this.state.recipes ? (
            this.state.recipes.map(recipe => (
              <Card key={recipe._id}>
                <Card.Title title={recipe.title} />
                <Card.Actions>
                  <AddRecipeModal recipe={recipe}
                                  trigger="ADD"
                                  onRecipeAdd={(recipe, date, meal) => PlannerActions.addRecipe(recipe, date, meal)} />
                  <a href={`/recipes/${recipe._id}`} target="_blank">SHOW RECIPE</a>
                </Card.Actions>
              </Card>
            ))
          ) : null
        }
      </div>
    );
  }
}

PlannerSidebar.propTypes = {};

export default PlannerSidebar;
