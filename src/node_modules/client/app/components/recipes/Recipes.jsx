import React from 'react';
import RecipeActions from 'actions/RecipesActions';
import RecipesStore from 'stores/RecipesStore';
import StoreStateSubscriber from 'mixins/StoreStateSubscriber';
import {history} from 'routes';

import RecipesView from './RecipesView';

const recipeSubscriber = StoreStateSubscriber(RecipesStore);

export default class Recipes extends recipeSubscriber(React.Component) {
  componentDidMount() {
    super.componentDidMount();
    RecipeActions.fetchRecipes();
  }

  render() {
    return (
      <RecipesView recipes={this.state.recipes}
                   onRecipeClick={id => history.push(`/recipes/${id}`)} />
    );
  }
}
