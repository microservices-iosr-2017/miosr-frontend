import React, {PropTypes} from 'react';
import RecipeActions from 'actions/RecipeActions';
import RecipeStore from 'stores/RecipeStore';
import StoreStateSubscriber from 'mixins/StoreStateSubscriber';

import RecipeView from './RecipeView';

const recipeSubscriber = StoreStateSubscriber(RecipeStore);

class Recipe extends recipeSubscriber(React.Component) {
  componentDidMount() {
    super.componentDidMount();
    RecipeActions.fetchRecipe.defer(this.props.params.id);
  }

  render() {
    return (
      <RecipeView recipe={this.state.recipe} />
    );
  }
}

Recipe.propTypes = {
  params: PropTypes.shape({
    id: PropTypes.string.isRequired
  }).isRequired
};

export default Recipe;
