import React from 'react';
import RecipeStore from 'stores/RecipeStore';
import RecipeActions from 'actions/RecipeActions';
import StoreStateSubscriber from 'mixins/StoreStateSubscriber';
import {history} from 'routes';

import RecipeCreatorView from './RecipeCreatorView';

const recipeSubscriber = StoreStateSubscriber(RecipeStore);

class RecipeCreator extends recipeSubscriber(React.Component) {
  componentDidMount() {
    super.componentDidMount();
    RecipeActions.clearRecipe();
  }

  render() {
    return (
      <RecipeCreatorView recipe={this.state.recipe}
                         onChange={RecipeActions.updateRecipe}
                         onCancel={() => {
                           RecipeActions.clearRecipe();
                           history.push('/recipes');
                         }}
                         onSubmit={RecipeActions.submitRecipe} />
    );
  }
}

export default RecipeCreator;
