
import axios from 'axios';
import MealsActions from 'client/app/actions/MealsActions';

const MEALS_PATH = '/api/foodlog';

const MealsSource = {
  fetch: () => {
    return axios.get(MEALS_PATH)
      .then(response => {
        const mealsList = response.data;
        MealsActions.fetchMealsSuccess(mealsList);
      })
      .catch(error => {
        // access response via error.response
        MealsActions.fetchMealsFailure(error);
      });
  },

  create: (date, name, ndbno, quantity) => {
    return axios.post(MEALS_PATH, {date, name, ndbno, quantity})
      .then(response => {
        MealsActions.addMealSuccess(response.data);
      })
      .catch(err => {
        MealsActions.addMealFailure();
      });
  }
};

export default MealsSource;
