import React from 'react';
import {createHistory} from 'history';
import {Router, Route, IndexRoute, useRouterHistory} from 'react-router';

import {LoggedInApp} from './components/App';
import Home from './components/home/Home';
import Recipes from './components/recipes/Recipes';
import RecipeCreator from './components/recipes/creator/RecipeCreator';
import Recipe from './components/recipes/recipe/Recipe';
import FoodLog from './components/foodlog/FoodLog';
import Planner from './components/planner/Planner';
import Groceries from './components/groceries/Groceries';
import Notifications from './components/notifications/Notifications';
import Settings from './components/settings/Settings';
import Profile from './components/profile/Profile';
import NotFound from './404';

export const history = useRouterHistory(createHistory)({basename: '/app.html'});

export default () => (
  <Router history={history}>
    <Route path="/" component={LoggedInApp}>
      <IndexRoute component={Home} />
      <Route path="recipes">
        <IndexRoute component={Recipes} />
        <Route path="new" component={RecipeCreator} />
        <Route path=":id" component={Recipe} />
      </Route>
      <Route path="log" component={FoodLog} />
      <Route path="planner" component={Planner} />
      <Route path="groceries" component={Groceries}>
        <Route path=":id" component={Groceries} />
      </Route>
      <Route path="notifications" component={Notifications} />
      <Route path="settings" component={Settings} />
      <Route path="profile" component={Profile} />
      <Route path="*" component={NotFound} />
    </Route>
  </Router>
);
