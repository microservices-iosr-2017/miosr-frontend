import './app.scss';
import React from 'react';
import ReactDOM from 'react-dom';
import Alt from 'alt';
import axios from 'axios';
import awilix from 'awilix';
const {asValue, asFunction, asClass} = awilix;
import App from 'client/components/App';
import {getLoginUrl, getNotesUrl} from 'client/utils/config';

const container = awilix.createContainer();

container.register({
  notesUrl: asValue(getNotesUrl()),
  loginUrl: asValue(getLoginUrl()),

  axios: asValue(axios),
  altInstance: asValue(new Alt()),

  notesStore: asFunction(require('client/stores/NotesStore').default).singleton(),
  notesActions: asFunction(require('client/actions/NotesActions').default).singleton(),
  notesSource: asFunction(require('client/sources/NotesSource').default).singleton(),

  appActions: asFunction(require('client/actions/AppActions').default).singleton(),
  appStore: asFunction(require('client/stores/AppStore').default).singleton(),
});

ReactDOM.render(
  (<App cradle={container.cradle} />),
  document.getElementById('content')
);

/* ToDo */
/*
- condier axios-mock instead of mocking whole sources
- remove sources, move stuff to stores
 */
