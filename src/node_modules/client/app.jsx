import './app.scss';
import React from 'react';
import ReactDOM from 'react-dom';
import Alt from 'alt';
import axios from 'axios';
import { ensureCookiesEnabled } from 'client/utils/cookies';
import HelloWorld from 'client/components/HelloWorld';
import awilix from 'awilix';
const {asValue, asFunction, asClass} = awilix;

const container = awilix.createContainer();

container.register({
  axios: asValue(axios),
  altInstance: asValue(new Alt()),

  exampleStore: asFunction(require('client/stores/ExampleStore').default).singleton(),
  exampleActions: asFunction(require('client/actions/ExampleActions').default).singleton(),
  exampleSource: asFunction(require('client/sources/ExampleSource').default).singleton(),
});

ReactDOM.render(
  ensureCookiesEnabled(
    <HelloWorld actions={container.cradle.exampleActions} store={container.cradle.exampleStore} />
  ),
  document.getElementById('content')
);
