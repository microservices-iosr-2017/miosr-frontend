import alt from 'client/utils/alt';

import ExampleActions from 'client/actions/ExampleActions';
import ExampleSource from 'client/sources/ExampleSource';

class ExampleStore {
  constructor() {
    this.bindListeners({
      handleFetch: ExampleActions.FETCH_EXAMPLE,
      handleFetchSucceess: ExampleActions.FETCH_EXAMPLE_SUCCESS,
      handleFetchFailure: ExampleActions.FETCH_EXAMPLE_FAILURE,
    });

    this.example = "";
    this.error = "no error";
  }

  handleFetch() {
    ExampleSource.fetch();
  }

  handleFetchSucceess(payload) {
    this.setState({example: payload.text});
  }

  handleFetchFailure(err) {
    this.setState({error: JSON.stringify(err)});
  }
}

export default alt.createStore(ExampleStore, 'ExampleStore');
