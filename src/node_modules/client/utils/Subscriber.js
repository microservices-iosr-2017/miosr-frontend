export default (superclass) => class extends superclass {
  constructor(...args) {
    super(...args);
    this._altHandlerRegistry = this._altHandlerRegistry || [];
  }

  addHandler(store, handler) {
    store.listen(handler);
    this._altHandlerRegistry.push({ store, handler });
  }

  destroyHandlers() {
    this._altHandlerRegistry.forEach(({ store, handler }) => {
      handler();
      store.unlisten(handler);
    });
    this._altHandlerRegistry = [];
  }

  handlers() {
    return this._altHandlerRegistry;
  }
};
