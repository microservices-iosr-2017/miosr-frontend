import React from 'react';
import {shallow} from 'enzyme';

import CardTitle from 'components/shared/card/CardTitle';

describe('<CardTitle />', () => {
  const title = 'Title';
  const subtitle = 'Subtitle';
  const className = 'custom-class';

  const wrapper = () => shallow(<CardTitle title={title}
                                                subtitle={subtitle}
                                                className={className} />);

  it('renders with card__title class', () => {
    const subject = wrapper().prop('className');
    expect(subject).to.include('card__title');
  });

  it('renders title in level 4 header', () => {
    const subject = wrapper().find('h4');
    expect(subject).to.have.lengthOf(1);
    expect(subject.text()).to.equal('Title');
  });

  it('renders subtitle in level 5 header', () => {
    const subject = wrapper().find('h5');
    expect(subject).to.have.lengthOf(1);
    expect(subject.text()).to.equal('Subtitle');
  });

  it('renders with custom class', () => {
    const subject = wrapper().prop('className');
    expect(subject).to.contain(className);
  });

  context('with children given as string', () => {
    const subject = shallow(<CardTitle>Child title</CardTitle>).find('h4');

    it('renders children as title', () => {
      expect(subject).to.have.lengthOf(1);
      expect(subject.text()).to.equal('Child title');
    });
  });

  context('with children given as React element', () => {
    const wrapperWithChild = shallow(<CardTitle><p>Paragraph title</p></CardTitle>);

    it('renders children', () => {
      const subject = wrapperWithChild.find('p');
      expect(subject).to.have.lengthOf(1);
      expect(subject.text()).to.equal('Paragraph title');
    });

    it('does not render header', () => {
      const subject = wrapperWithChild.find('h4');
      expect(subject).to.have.lengthOf(0);
    });
  });
});
