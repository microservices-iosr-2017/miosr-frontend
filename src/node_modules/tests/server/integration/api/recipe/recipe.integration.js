import {authenticate} from 'tests/server/shared/setup/authenticate';

require('tests/server/shared/behaviors/api');

describe('Recipe API:', () => {
  const url = '/api/recipes';
  let token;
  before(async () => {
    token = await authenticate();
  });

  describe('GET /api/recipes', () => {
    itBehavesLike('API GET', {url, getToken: () => token});
  });

  describe('POST /api/recipes', () => {
    itBehavesLike('API POST', {url, factoryName: 'recipe', getToken: () => token});
  });

  describe('GET /api/recipes/:id', () => {
    itBehavesLike('API entity GET', {url, factoryName: 'recipe', getToken: () => token});
  });

  describe('PUT /api/recipes/:id', () => {
    itBehavesLike('API PUT', {url, factoryName: 'recipe', getToken: () => token});
  });

  describe('PATCH /api/grocery_lists/:id', () => {
    itBehavesLike('API PATCH', {
      url,
      factoryName: 'recipe',
      property: 'title',
      getToken: () => token
    });
  });

  describe('DELETE /api/recipes/:id', () => {
    itBehavesLike('API DELETE', {url, factoryName: 'recipe', getToken: () => token});
  });
});
