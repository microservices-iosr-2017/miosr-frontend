const proxyquire = require('proxyquire').noPreserveCache();

const controller = require('tests/server/shared/setup/controller_stub').default('groceryList');
const authService = require('tests/server/shared/setup/auth_stub').default();
const router = require('tests/server/shared/setup/router_stub').default();
require('tests/server/shared/behaviors/api_router');

const groceryListIndex = proxyquire('server/api/grocery_list/index.js', {
  express: {
    Router: () => router,
  },
  './grocery_list.controller': {
    default: () => controller,
  },
  '../../auth/auth.service': authService,
}).default;


describe('GroceryList API Router:', () => {
  it('should return an express router instance', () => {
    groceryListIndex.should.equal(router);
  });

  itBehavesLike('API Router', {router, name: 'groceryList', url: '/api/grocery_lists'});
});
